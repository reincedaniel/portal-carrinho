@@include("partials/main.html")

    <head>
        
        @@include("partials/title-meta.html", {"title": "Meu Perfil"})

        <!-- Choise Css -->
        <link rel="stylesheet" href="assets/libs/choices.js/public/assets/styles/choices.min.css">

        @@include("partials/head-css.html")

        <script>

            document.addEventListener('DOMContentLoaded', function () {
                                        
                                
                                window.vueApp({
                                    data() {
                                        return {
                                            candidateActive:{},
                                            loading: true,
                                            loadingCV: false,
                                            loadingProfile: false,
                                            errorMessage:'',
                                            successMessage:'',
                                            loadingPicture: false,
                                            phone1:{number:'', type:'whatsapp'},
                                            phone2:{number:'', type:'normal'},
                                            email1:''

                                        }
                                    },
                                    computed: {
                                        isUserLogger() {
                                            return !!localStorage.getItem('user');
                                        },
                                        userLogger() {
                                            const user = localStorage.getItem('user')
                                            return user ? JSON.parse(user) : null;
                                        },
                                        userCandidate() {
                                            const candidate = localStorage.getItem('candidate')
                                            return candidate ? JSON.parse(candidate) : null;
                                        },
                                        
                                        userCandidateCheckStatus() {
                                            const candidateStatusCheck = localStorage.getItem('candidateStatusCheck')
                                            return candidateStatusCheck ? JSON.parse(candidateStatusCheck) : null;
                                        }  
                                    },
                                    methods: {
                                        goProfile() {
                                         
                                                                    const tabBtn = document.getElementById('settings-tab');
                                                                    if(tabBtn){ tabBtn.click()};
                                                          
                                        },
                                        async handlePicUpload(event) {
                                            this.loadingPicture = true;
                                            await this.uploadPicture(event);
                                        },
                                        async uploadPicture(event) {
                                           const fileInput = event.target;
                                           if (!fileInput.files.length) return;
                                           const file = fileInput.files[0];
                                           const userLogger = this.userLogger;
                                           if (!userLogger) return;

                                           const formData = new FormData();
                                           formData.append('userId', userLogger.userId);
                                           formData.append('file', file);

                                           this.loadingPicture = true;

                                           try {
                                               const response = await fetch('https://humanresource-api.mayacode.co/api/v1/candidate/picture', {
                                                   method: 'PUT',
                                                   body: formData
                                               });
                                               const data = await response.json();
                                               // Atualiza os dados do candidato com os dados extraídos, se disponíveis
                                               if (data && data.data) {
                                                this.getCandidateOne()
                                                  
                                               }
                                               this.loadingPicture = false;
                                           } catch (e) {
                                               // erro silencioso
                                               this.loadingPicture = false;
                                           } finally {
                                                
                                               
                                             
                                           }
                                       },
                                        async handleCVUpload(event) {
                                            await this.uploadAndExtractCV(event);
                                        },
                                        async addCandidate() {
                                            if (!this.candidateActive) return;

                                            if(this.candidateActive.id) {

                                                this.successMessage = '';
                                            this.errorMessage = '';

                                            // Validação dos campos obrigatórios
                                            const requiredFields = [
                                                { field: this.candidateActive.name, label: 'Nome' },
                                                { field: this.candidateActive.birthday, label: 'Data de Nascimento' },
                                                { field: this.candidateActive.gender, label: 'Gênero' },
                                                { field: this.candidateActive.civilStatus, label: 'Estado Civil' },
                                                { field: this.candidateActive.location, label: 'Endereço' },
                                                { field: this.email1, label: 'E-mail' },
                                                { field: this.phone1.number, label: 'Telefone (Whatsapp)' },
                                            ];
                                            const missing = requiredFields.filter(f => !f.field || !f.field.toString().trim());
                                            if (missing.length) {
                                                this.errorMessage = `Campo(s) obrigatório(s): ${missing.map(f => f.label).join(', ')}`;
                                                return;
                                            }

                                                this.successMessage = 'Perfil Actualizado com sucesso! ...';

                                               /*  setInterval(() => {
                                                    window.location.reload();
                                                }, 1200); */
                                            } else {
                                          
                                            this.successMessage = '';
                                            this.errorMessage = '';

                                            // Validação dos campos obrigatórios
                                            const requiredFields = [
                                                { field: this.candidateActive.name, label: 'Nome' },
                                                { field: this.candidateActive.birthday, label: 'Data de Nascimento' },
                                                { field: this.candidateActive.gender, label: 'Gênero' },
                                                { field: this.candidateActive.civilStatus, label: 'Estado Civil' },
                                                { field: this.candidateActive.location, label: 'Endereço' },
                                                { field: this.email1, label: 'E-mail' },
                                                { field: this.phone1.number, label: 'Telefone (Whatsapp)' },
                                            ];
                                            const missing = requiredFields.filter(f => !f.field || !f.field.toString().trim());
                                            if (missing.length) {
                                                this.errorMessage = `Campo(s) obrigatório(s): ${missing.map(f => f.label).join(', ')}`;
                                                return;
                                            }

                                            // Atualiza os telefones no objeto candidateActive
                                         

                                            this.candidateActive.phoneNumbers = []
                                            this.candidateActive.emails = []
                                            this.candidateActive.emails.push(this.email1)

                                            if(this.phone1.number) {
                                                this.candidateActive.phoneNumbers.push({ number: this.phone1.number, type: 'whatsapp' });
                                            }
                                            if(this.phone2.number) {
                                                this.candidateActive.phoneNumbers.push({ number: this.phone2.number, type: 'normal' });
                                            }

                                            this.loadingProfile = true;
                                            try {
                                                const response = await fetch(
                                                    'https://humanresource-api.mayacode.co/api/v1/candidate',
                                                    {
                                                        method: 'POST',
                                                        headers: { 'Content-Type': 'application/json' },
                                                        body: JSON.stringify({
                                                            ...this.candidateActive,
                                                            userId: this.userLogger.userId
                                                        })
                                                    }
                                                );
                                                const data = await response.json();
                                                if (response.ok && data && data.data) {
                                                    this.candidateActive = { ...this.candidateActive, ...data.data };
                                                    // localStorage.setItem('candidate', JSON.stringify(this.candidateActive));
                                                    this.getCandidate()
                                                    this.successMessage = 'Perfil salvo com sucesso! ...';
                                                    setInterval(() => {
                                                    window.location.reload();
                                                }, 1200);
                                                } else {
                                                    this.errorMessage = data?.message || 'Erro ao salvar perfil.';
                                                }
                                            } catch (e) {
                                                this.errorMessage = 'Erro ao salvar perfil.';
                                            } finally {
                                                this.loadingProfile = false;
                                            }
                                        }
                                        }
                                    ,
                                        async uploadAndExtractCV(event) {
                                           
                                            const fileInput = event.target;
                                            if (!fileInput.files.length) return;
                                            const file = fileInput.files[0];
                                            const userLogger = this.userLogger;
                                            if (!userLogger) return;

                                            const formData = new FormData();
                                            formData.append('userId', userLogger.userId);
                                            formData.append('file', file);

                                            this.loadingCV = true;

                                            try {
                                                const response = await fetch('https://humanresource-api.mayacode.co/api/v1/candidate/cv/extract-data', {
                                                    method: 'POST',
                                                    body: formData
                                                });
                                                const data = await response.json();
                                                // Atualiza os dados do candidato com os dados extraídos, se disponíveis
                                                if (data && data.data) {

                                                    
                                                    const phoneNumbers = data.data.phoneNumbers || [];
                                                    if (phoneNumbers.length > 0) {
                                                        this.phone1 = { number: phoneNumbers[0].number || '', type: phoneNumbers[0].type || 'whatsapp' };
                                                        if (phoneNumbers.length > 1) {
                                                            this.phone2 = { number: phoneNumbers[1].number || '', type: phoneNumbers[1].type || 'normal' };
                                                        } else {
                                                            this.phone2 = { number: '', type: 'normal' };
                                                        }
                                                    } else {
                                                        this.phone1 = { number: '', type: 'whatsapp' };
                                                        this.phone2 = { number: '', type: 'normal' };
                                                    }
                                                   
                                                    const mails =  data.data.emails || [];
                                                    if (mails.length > 0) {
                                                        this.email1 = mails[0] || '';
                                                    } else {
                                                        this.email1 = '';
                                                    }
                                                    
                                                    this.candidateActive = { ...this.candidateActive, ...data.data , userId: this.userLogger.userId };
                                                   
                                                }
                                            } catch (e) {
                                                // erro silencioso
                                            } finally {
                                            this.loadingCV = false;
                                                
                                              
                                            }
                                        },
                                        async getCandidateOne() {
                                            const userLogger = this.userLogger;
                                            if (!userLogger) return;
                                            try {
                                                const res = await fetch(`https://humanresource-api.mayacode.co/api/v1/candidate?userId=${userLogger.userId}&pageSize=1&pageNumber=1`);
                                                const data = await res.json();
                                                const candidate = data?.data?.data || [];
                                                if (!candidate.length) return;
                                                localStorage.setItem("candidate", JSON.stringify(candidate[0]));
                                                this.candidateActive = candidate[0];
                                                this.phonesAdd()
                                               
                                                //await this.getCandidateCheckStatus(userLogger);
                                            } catch (e) {
                                                // erro silencioso
                                            }finally {
                                             /*    this.loading = false; */
                                            }
                                        },
                                        logout() {
                                            localStorage.clear();
                                            window.location.reload();
                                            window.location.href = '/sign-in.html';
                                        },
                                        phonesAdd() {
                                            const phoneNumbers = this.candidateActive.phoneNumbers || [];
                                                    if (phoneNumbers.length > 0) {
                                                        this.phone1 = { number: phoneNumbers[0].number || '', type: phoneNumbers[0].type || 'whatsapp' };
                                                        if (phoneNumbers.length > 1) {
                                                            this.phone2 = { number: phoneNumbers[1].number || '', type: phoneNumbers[1].type || 'normal' };
                                                        } else {
                                                            this.phone2 = { number: '', type: 'normal' };
                                                        }
                                                    } else {
                                                        this.phone1 = { number: '', type: 'whatsapp' };
                                                        this.phone2 = { number: '', type: 'normal' };
                                                    }

                                                    /*  */

                                                    const mails = this.candidateActive.emails || [];
                                                    if (mails.length > 0) {
                                                        this.email1 = mails[0] || '';
                                                    } else {
                                                        this.email1 = '';
                                                    }
                                                    
                                        },
                                        async getCandidate() {
                                            this.loading = true;
                                            const userLogger = this.userLogger;
                                            if (!userLogger) return;
                                            try {
                                                const res = await fetch(`https://humanresource-api.mayacode.co/api/v1/candidate?userId=${userLogger.userId}&pageSize=1&pageNumber=1`);
                                                const data = await res.json();
                                                const candidate = data?.data?.data || [];
                                                if (!candidate.length) return;
                                                localStorage.setItem("candidate", JSON.stringify(candidate[0]));
                                                this.candidateActive = candidate[0];
                                                this.phonesAdd()
                                                await this.getCandidateCheckStatus(userLogger);
                                            } catch (e) {
                                                // erro silencioso
                                            }finally {
                                                this.loading = false;
                                            }
                                        },
                                        getCandidateCheckStatus() {
                                            // Executa tudo e só retorna no final
                                            const userLogger = this.userLogger;
                                            return new Promise((resolve) => {
                                                if (!userLogger) {
                                                    resolve();
                                                    return;
                                                }
                                                const candidate = JSON.parse(localStorage.getItem("candidate") || "null");
                                                if (!candidate || !candidate.id) {
                                                    resolve();
                                                    return;
                                                }
                                                fetch(`https://humanresource-api.mayacode.co/api/v1/candidate/${candidate.id}/check`)
                                                    .then(res => res.json())
                                                    .then(data => {
                                                        const candidateStatus = data?.data || null;
                                                        localStorage.setItem("candidateStatusCheck", JSON.stringify(candidateStatus));
                                                        resolve();
                                                    })
                                                    .catch(() => resolve());
                                            });
                                        },
                                    },
                                    mounted() {
                                        // localStorage.setItem('user', JSON.stringify({name: 'John Doe', email: 'ma@mail.com'}));
                                        this.getCandidate()
                                    }
                                }).mount('#job-list-vue-app-8');
            
                            });
            </script>

    </head>

    @@include("partials/body.html")

        <!-- Begin page -->
        <div>

            @@include("partials/topbar.html")

            <div class="main-content" id="job-list-vue-app-8">

                <div class="page-content">

                    @@include("partials/page-title.html",{"pagetitle":"Perfil","title":"Meu Perfil"})

                    <!-- START PROFILE -->
                    <section class="section">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="card profile-sidebar me-lg-4">
                                        <!-- Skeleton Loader -->
                                        <div v-if="loading" class="card-body p-4">
                                            <div class="text-center pb-4 border-bottom">
                                                <span class="bg-ss-secondary rounded-circle d-inline-block mb-4" style="width: 80px; height: 80px;"></span>
                                                <div class="bg-ss-secondary rounded mb-2 mx-auto" style="width: 60%; height: 20px;"></div>
                                                <div class="bg-ss-secondary rounded mx-auto" style="width: 40%; height: 14px;"></div>
                                                <ul class="list-inline d-flex justify-content-center align-items-center mt-3">
                                                    <li class="list-inline-item bg-ss-secondary rounded" style="width: 80px; height: 18px;"></li>
                                                </ul>
                                                <ul class="candidate-detail-social-menu list-inline mb-0 mt-3">
                                                    <li class="list-inline-item bg-ss-secondary rounded-circle" style="width: 36px; height: 36px;"></li>
                                                    <li class="list-inline-item bg-ss-secondary rounded-circle ms-2" style="width: 36px; height: 36px;"></li>
                                                </ul>
                                            </div>
                                            <div class="mt-4 border-bottom pb-4">
                                                <h5 class="fs-17 fw-bold mb-3">Documentos</h5>
                                                <ul class="profile-document list-unstyled mb-0">
                                                    <li>
                                                        <div class="profile-document-list d-flex align-items-center mt-4">
                                                            <span class="bg-ss-secondary rounded me-3" style="width: 32px; height: 32px;"></span>
                                                            <div class="flex-grow-1">
                                                                <div class="bg-ss-secondary rounded mb-1" style="width: 100px; height: 16px;"></div>
                                                                <div class="bg-ss-secondary rounded" style="width: 60px; height: 12px;"></div>
                                                            </div>
                                                            <span class="bg-ss-secondary rounded ms-auto" style="width: 24px; height: 24px;"></span>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="mt-4">
                                                <h5 class="fs-17 fw-bold mb-3">Contatos</h5>
                                                <div class="profile-contact">
                                                    <ul class="list-unstyled mb-0">
                                                        <li>
                                                            <div class="d-flex align-items-center mb-2">
                                                                <span class="bg-ss-secondary rounded me-3" style="width: 60px; height: 14px;"></span>
                                                                <span class="bg-ss-secondary rounded" style="width: 120px; height: 14px;"></span>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex align-items-center mb-2">
                                                                <span class="bg-ss-secondary rounded me-3" style="width: 60px; height: 14px;"></span>
                                                                <span class="bg-ss-secondary rounded" style="width: 100px; height: 14px;"></span>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex align-items-center">
                                                                <span class="bg-ss-secondary rounded me-3" style="width: 60px; height: 14px;"></span>
                                                                <span class="bg-ss-secondary rounded" style="width: 80px; height: 14px;"></span>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Real Content -->
                                        <div v-else class="card-body p-4">
                                            <div class="text-center pb-4 border-bottom">
                                                <div class="mailchimp-avatar text-center">
                                                    <img :src="candidateActive?.photoUrl || 'assets/images/profile.jpg'" alt=""
                                                    class="avatar-lg img-thumbnail rounded-circle mb-4" />
                                                </div>
                                                
                                                <h5 class="mb-0">{{ candidateActive?.name || 'Nome não informado' }}</h5>
                                                <p class="text-muted">{{ userLogger?.email }}</p>
                                                <ul class="list-inline d-flex justify-content-center align-items-center ">
                                                    <li class="list-inline-item text-warning fs-19">
                                                        <i class="mdi mdi-star"></i>
                                                        <i class="mdi mdi-star"></i>
                                                        <i class="mdi mdi-star"></i>
                                                        <i class="mdi mdi-star"></i>
                                                        <i class="mdi mdi-star-half-full"></i>
                                                    </li>
                                                </ul>
                                                <ul class="candidate-detail-social-menu list-inline mb-0">
                                                    <li class="list-inline-item" v-if="candidateActive?.emails?.length">
                                                        <a :href="'mailto:' + candidateActive.emails[0]" class="social-link rounded-3 btn-soft-primary">
                                                            <i class="uil uil-envelope"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item" v-if="candidateActive?.phoneNumbers?.length">
                                                        <a :href="'https://wa.me/' + candidateActive.phoneNumbers[0].number.replace(/\D/g, '')" target="_blank" class="social-link rounded-3 btn-soft-success">
                                                            <i class="uil uil-whatsapp"></i>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <!--end profile-->
                                            <div class="mt-4 border-bottom pb-4" v-if="candidateActive?.cvUrl">
                                                <h5 class="fs-17 fw-bold mb-3">Documentos</h5>
                                                <ul class="profile-document list-unstyled mb-0">
                                                    <li>
                                                        <div class="profile-document-list d-flex align-items-center mt-4 ">
                                                            <div class="icon flex-shrink-0">
                                                                <i class="uil uil-file"></i>
                                                            </div>
                                                            <div class="ms-3">
                                                                <h6 class="fs-16 mb-0">Currículo.pdf</h6>
                                                                <p class="text-muted mb-0">Arquivo</p>
                                                            </div>
                                                            <div class="ms-auto">
                                                                <a :href="candidateActive.cvUrl" target="_blank" class="fs-20 text-muted">
                                                                    <i class="uil uil-import"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                            <!--end document-->
                                            <div class="mt-4">
                                                <h5 class="fs-17 fw-bold mb-3">Contatos</h5>
                                                <div class="profile-contact">
                                                    <ul class="list-unstyled mb-0">
                                                        <li v-if="candidateActive?.emails?.length">
                                                            <div class="d-flex">
                                                                <label>Email</label>
                                                                <div>
                                                                    <p class="text-muted text-break mb-0">
                                                                        {{ candidateActive.emails[0] }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li v-if="candidateActive?.phoneNumbers?.length">
                                                            <div class="d-flex">
                                                                <label>Telefone</label>
                                                                <div>
                                                                    <p class="text-muted mb-0">{{ candidateActive.phoneNumbers[0].number }}</p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li v-if="candidateActive?.location">
                                                            <div class="d-flex">
                                                                <label>Localização</label>
                                                                <div>
                                                                    <p class="text-muted mb-0">{{ candidateActive.location }}</p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <!--end contact-details-->
                                        </div>
                                        <!--end card-body-->
                                    </div>
                                    <!--end profile-sidebar-->
                                </div>
                                <!--end col-->
                                <div class="col-lg-8">
                                    <div class="card profile-content-page mt-4 mt-lg-0">
                                        <ul class="profile-content-nav nav nav-pills border-bottom mb-4" id="pills-tab"
                                                role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link active" id="overview-tab" data-bs-toggle="pill"
                                                        data-bs-target="#overview" type="button" role="tab" aria-controls="overview"
                                                        aria-selected="true">
                                                        Resumo
                                                    </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link" id="settings-tab" data-bs-toggle="pill"
                                                        data-bs-target="#settings" type="button" role="tab" aria-controls="settings"
                                                        aria-selected="false">
                                                        Perfil
                                                    </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link" id="settings2-tab" data-bs-toggle="pill"
                                                        data-bs-target="#settings2" type="button" role="tab" aria-controls="settings2"
                                                        aria-selected="false">
                                                        Segurança
                                                    </button>
                                                </li>
                                            </ul>
                                        <div class="card-body p-4">
                                            <!-- <pre>{{candidateActive}}</pre> -->
                                           
                                        <div class="card-body p-4">
                                            <div class="tab-content" id="pills-tabContent">
                                                <!-- Skeleton Loader -->
                                                <div v-if="loading" class="job-box card mt-4" style="cursor: pointer; opacity: 0.7;">
                                                    <div class="bookmark-label text-center">
                                                        <span class="bg-ss-secondary rounded-circle d-inline-block" style="width: 24px; height: 24px;"></span>
                                                    </div>
                                                    <div class="p-4">
                                                        <div class="row align-items-center">
                                                            <div class="col-md-2">
                                                                <div class="text-center mb-4 mb-md-0">
                                                                    <span class="bg-ss-secondary rounded-3 d-inline-block" style="width: 60px; height: 60px;"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="mb-2 mb-md-0">
                                                                    <div class="bg-ss-secondary rounded mb-2" style="width: 70%; height: 20px;"></div>
                                                                    <div class="bg-ss-secondary rounded" style="width: 40%; height: 14px;"></div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <div class="d-flex mb-2 align-items-center">
                                                                    <span class="bg-ss-secondary rounded-circle me-2" style="width: 16px; height: 16px;"></span>
                                                                    <div class="bg-ss-secondary rounded" style="width: 40px; height: 14px;"></div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="bg-ss-secondary rounded-pill d-inline-block" style="width: 80px; height: 18px;"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="p-3 bg-light">
                                                        <div class="text-center ">
                                                            <div class="spinner-border text-ss-secondary" role="status">
                                                                <span class="">...</span>
                                                            </div>
                                                        </div>
                                                        <div class="text-center ">
                                                            <div class="text-ss-secondary">
                                                                <span class="">A processar ...</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Conteúdo real -->
                                                <div v-else class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
                                                    <div v-if="isUserLogger && ( !userCandidateCheckStatus || !(userCandidateCheckStatus && userCandidateCheckStatus.isComplete))" >    
                                                        <div class="alert alert-warning text-center" role="alert">
                                                            <strong>Seu perfil não está completo!</strong>
                                                            <p class="mb-2">Para aumentar suas chances de ser encontrado por recrutadores, complete seu perfil.</p>
                                                            <button
                                                                type="button"
                                                                class="btn btn-primary mt-2"
                                                                @click="goProfile()"
                                                            >
                                                                Completar Perfil
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="" v-else>

                                                    
                                                    <div>
                                                        <h5 class="fs-18 fw-bold">Sobre</h5>
                                                        <p class="text-muted mt-4">
                                                            {{ candidateActive?.description || candidateActive?.summary || 'Sem descrição disponível.' }}
                                                        </p>
                                                    </div>

                                                    <div class="candidate-education-details mt-4" v-if="candidateActive?.education?.length">
                                                        <h6 class="fs-18 fw-bold mb-0">Educação</h6>
                                                        <div v-for="(edu, idx) in candidateActive?.education" :key="idx" class="candidate-education-content mt-4 d-flex">
                                                            <div class="circle flex-shrink-0 primary-bg-subtle">
                                                                <strong class="text-primary">{{ edu.course ? edu.course.charAt(0).toUpperCase() : 'E' }}</strong>
                                                            </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">{{ edu.course }}</h6>
                                                                <p class="mb-2 text-muted">
                                                                    {{ edu.institute }} <span v-if="edu.location">- {{ edu.location }}</span>
                                                                    <span v-if="edu.period">({{ edu.period }})</span>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="candidate-education-details mt-4" v-if="candidateActive?.experiences?.length">
                                                        <h6 class="fs-18 fw-bold mb-0">Experiências</h6>
                                                        <div v-for="(exp, idx) in candidateActive.experiences" :key="idx" class="candidate-education-content mt-4 d-flex">
                                                            <div class="circle flex-shrink-0 primary-bg-subtle">
                                                                <strong class="text-primary">{{ exp.position ? exp.position.charAt(0).toUpperCase() : 'E' }}</strong>
                                                            </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">{{ exp.position }}</h6>
                                                                <p class="mb-2 text-muted">{{ exp.company }} <span v-if="exp.period">- {{ exp.period }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="mt-4" v-if="candidateActive?.skills?.length">
                                                        <h5 class="fs-18 fw-bold">Habilidades</h5>
                                                        <span v-for="(skill, idx) in candidateActive.skills" :key="idx"
                                                            class="badge fs-13 bg-primary-subtle text-primary mt-2 me-2">{{ skill }}</span>
                                                    </div>

                                                    <div class="mt-4" v-if="candidateActive?.languages?.length">
                                                        <h5 class="fs-18 fw-bold">Idiomas falados</h5>
                                                        <span v-for="(lang, idx) in candidateActive.languages" :key="idx"
                                                            class="badge fs-13 bg-success-subtle text-success mt-2 me-2">{{ lang }}</span>
                                                    </div>

                                                    <div class="mt-4" v-if="candidateActive?.location">
                                                        <h5 class="fs-18 fw-bold">Localização</h5>
                                                        <span class="badge fs-13 bg-primary text-white mt-2 me-2">{{ candidateActive.location }}</span>
                                                    </div>

                                                    <div class="mt-4" v-if="candidateActive?.cvUrl">
                                                        <h5 class="fs-18 fw-bold">Currículo</h5>
                                                        <a :href="candidateActive.cvUrl" target="_blank" class="btn btn-outline-primary">
                                                            <i class="uil uil-file-alt me-2"></i>Ver Currículo
                                                        </a>
                                                    </div>

                                                </div>
                                                </div>
                                                <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                                                    <form @submit.prevent="addCandidate"  novalidate>
                                                        <div class="row">

                                                            <h5 class="fs-17 fw-semibold mb-3 mb-0">Minha Conta</h5>
                                                            
                                                            <div class="text-center"  >
                                                                <div class="mb-4 profile-user">
                                                                    <img :src="candidateActive?.photoUrl || 'assets/images/profile.jpg'" class="rounded-circle img-thumbnail profile-img" id="profile-img" alt="">
                                                                    <div class="p-0 rounded-circle profile-photo-edit">
                                                                        <input id="profile-img-file-input" @change="handlePicUpload" :disabled="loadingPicture" type="file" class="profile-img-file-input">
                                                                        <label for="profile-img-file-input" class="profile-photo-edit avatar-xs">
                                                                            <i class="uil uil-edit"></i>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div v-if="loadingPicture" class="mt-2 text-center">
                                                                    <span class="spinner-border spinner-border-sm text-primary" role="status" aria-hidden="true"></span>
                                                                    <span class="ms-2 text-primary"> <strong>Carregando foto...</strong></span>
                                                                </div>
                                                              
                                                            </div>
                                                           

                                                            <div class="mt-4">
                                                                <h5 class="fs-17 fw-semibold mb-3">Carregar Currículo</h5>
                                                                <div class="row">
                                                                    <div class="col-lg-12">
                                                                        <div class="mb-3">
                                                                            <label for="attachmentscv" class="form-label text-danger">
                                                                                Os dados do CV serão extraídos e colocados nos respectivos campos
                                                                            </label>
                                                                            <input
                                                                                class="form-control border-primary text-primary"
                                                                                type="file"
                                                                                id="attachmentscv"
                                                                                @change="handleCVUpload"
                                                                                :disabled="loadingCV"
                                                                            />
                                                                            <div v-if="loadingCV" class="mt-2">
                                                                                <span class="spinner-border spinner-border-sm text-primary" role="status" aria-hidden="true"></span>
                                                                                <span class="ms-2 text-primary"> <strong>Carregando currículo...</strong></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <h5 class="fs-17 fw-semibold my-3">Informações</h5>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="name" class="form-label">Nome</label>
                                                                    <input type="text" required class="form-control" id="name"
                                                                        v-model="candidateActive.name" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="birthday" class="form-label">Data de Nascimento</label>
                                                                    <input type="date" required class="form-control" id="birthday"
                                                                        v-model="candidateActive.birthday" :value="candidateActive.birthday ? candidateActive.birthday.substr(0,10) : ''" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="gender" class="form-label">Gênero</label>
                                                                    <select class="form-select" required id="gender" v-model="candidateActive.gender">
                                                                        <option value="">Selecione</option>
                                                                        <option value="Masculino">Masculino</option>
                                                                        <option value="Feminino">Feminino</option>
                                                                        <option value="Outro">Outro</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="civilStatus" class="form-label">Estado Civil</label>
                                                                        <select class="form-select" id="civilStatus" v-model="candidateActive.civilStatus">
                                                                            <option value="">Selecione</option>
                                                                            <option value="Solteiro">Solteiro</option>
                                                                            <option value="Casado">Casado</option>
                                                                            <option value="Viúvo">Viúvo</option>
                                                                        </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="nationality" class="form-label">Nacionalidade</label>
                                                                    <input type="text" class="form-control" id="nationality"
                                                                        v-model="candidateActive.nationality" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="location" class="form-label">Endereço</label>
                                                                    <input type="text" class="form-control" id="location"
                                                                        v-model="candidateActive.location" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="email" class="form-label">E-mail</label>
                                                                    <input type="text" required class="form-control" id="email"
                                                                        v-model="email1" placeholder="ex.: exemplo@mail.com" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="phone" class="form-label">Telefone (Whatsapp)</label>
                                                                    <input type="text" required class="form-control" id="phone"
                                                                        v-model="phone1.number" placeholder="+244 999999999" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="mb-3">
                                                                    <label for="phone" class="form-label">Telefone (Normal)</label>
                                                                    <input type="text"  class="form-control" id="phone"
                                                                        v-model="phone2.number" placeholder="+244 999999999" />
                                                                </div>
                                                            </div>
                                                            
                                                            
                                                           
                                                            <div class="col-lg-12">
                                                                <div class="mb-3">
                                                                    <label for="description" class="form-label">Sobre</label>
                                                                    <textarea class="form-control" id="description" rows="5"
                                                                        v-model="candidateActive.description"></textarea>
                                                                </div>
                                                            </div>

                                                              <!-- TTTTTTTTTTTTTTTTTTTT -->
                                                                <div class="candidate-education-details mt-4" v-if="candidateActive?.education?.length">
                                                                    <h6 class="fs-16 fw-bold mb-0">Educação</h6>
                                                                    <div v-for="(edu, idx) in candidateActive.education" :key="idx" class="candidate-education-content mt-3 d-flex">
                                                                        <div class="circle flex-shrink-0 primary-bg-subtle">
                                                                            <strong class="text-primary">{{ edu.course ? edu.course.charAt(0).toUpperCase() : 'E' }}</strong>
                                                                        </div>
                                                                        <div class="ms-3">
                                                                            <h6 class="fs-14 mb-1">{{ edu.course }}</h6>
                                                                            <p class="mb-2 text-muted" style="font-size: 0.95em;">
                                                                                {{ edu.institute }} <span v-if="edu.location">- {{ edu.location }}</span>
                                                                                <span v-if="edu.period">({{ edu.period }})</span>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="candidate-education-details mt-4" v-if="candidateActive?.experiences?.length">
                                                                    <h6 class="fs-16 fw-bold mb-0">Experiências</h6>
                                                                    <div v-for="(exp, idx) in candidateActive.experiences" :key="idx" class="candidate-education-content mt-3 d-flex">
                                                                        <div class="circle flex-shrink-0 primary-bg-subtle">
                                                                            <strong class="text-primary">{{ exp.position ? exp.position.charAt(0).toUpperCase() : 'E' }}</strong>
                                                                        </div>
                                                                        <div class="ms-3">
                                                                            <h6 class="fs-14 mb-1">{{ exp.position }}</h6>
                                                                            <p class="mb-2 text-muted" style="font-size: 0.95em;">{{ exp.company }} <span v-if="exp.period">- {{ exp.period }}</span></p>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="mt-4" v-if="candidateActive?.skills?.length">
                                                                    <h5 class="fs-16 fw-bold">Habilidades</h5>
                                                                    <span v-for="(skill, idx) in candidateActive.skills" :key="idx"
                                                                        class="badge fs-12 bg-primary-subtle text-primary mt-2 me-2">{{ skill }}</span>
                                                                </div>

                                                                <div class="mt-4" v-if="candidateActive?.languages?.length">
                                                                    <h5 class="fs-16 fw-bold">Idiomas</h5>
                                                                    <span v-for="(lang, idx) in candidateActive.languages" :key="idx"
                                                                        class="badge fs-12 bg-success-subtle text-success mt-2 me-2">{{ lang }}</span>
                                                                </div>

                                                                <div class="mt-4" v-if="candidateActive?.location">
                                                                    <h5 class="fs-16 fw-bold">Localização</h5>
                                                                    <span class="badge fs-12 bg-primary text-white mt-2 me-2">{{ candidateActive.location }}</span>
                                                                </div>

                                                                <div class="mt-4 d-none" v-if="candidateActive?.cvUrl">
                                                                    <h5 class="fs-16 fw-bold">Currículo</h5>
                                                                    <a :href="candidateActive.cvUrl" target="_blank" class="btn btn-outline-primary btn-sm"></a>
                                                                        <i class="uil uil-file-alt me-2"></i>Ver Currículo
                                                                    </a>
                                                                </div>

                                                                <!-- TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT-->
                                                        </div>
                                              
                                              
                                                        <!-- Botão de salvar perfil -->
                                                        <div class="mt-4 text-end">
                                                            <button
                                                                type="submit"
                                                                class="btn btn-primary w-100"                                                                
                                                                :disabled="loadingProfile || loadingCV || loading"
                                                            >
                                                                <span v-if="loadingProfile" class="spinner-border spinner-border-sm me-2"></span>
                                                                <span v-if="loadingProfile">Processando ...</span>
                                                                <span v-else><i class="uil uil-save me-1"></i>Salvar Perfil</span>
                                                            </button>
                                                        </div>
                                                        <!-- Mensagens de sucesso e erro -->
                                                        <div class="mt-3">
                                                            <div v-if="successMessage" class="alert alert-success py-2">
                                                                {{ successMessage }}
                                                            </div>
                                                            <div v-if="errorMessage" class="alert alert-danger py-2">
                                                                {{ errorMessage }}
                                                            </div>
                                                        </div>
                                                        <!--end Change-password-->
                                                        <!-- <div class="mt-4 text-end">
                                                            <a href="javascript:void(0)" class="btn btn-primary">Atualizar Agora</a>
                                                        </div> -->
                                                    </form>
                                                    <!--end form--></div>
                                                <div class="tab-pane fade" id="settings2" role="tabpanel" aria-labelledby="settings2-tab">
                                                    <form action="#">
                                                        

                                                        
                                                     
                                                        
                                                        <!--end account-->
                                                        
                                                        <!--end profile-->
                                                        <!-- <div class="mt-4">
                                                            <h5 class="fs-17 fw-semibold mb-3">Redes Sociais</h5>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <div class="mb-3">
                                                                        <label for="facebook" class="form-label">Facebook</label>
                                                                        <input type="text" class="form-control" id="facebook"
                                                                            value="https://www.facebook.com" />
                                                                    </div>
                                                                </div>
                                                              
                                                                <div class="col-lg-6">
                                                                    <div class="mb-3">
                                                                        <label for="twitter" class="form-label">Twitter</label>
                                                                        <input type="text" class="form-control" id="twitter"
                                                                            value="https://www.twitter.com" />
                                                                    </div>
                                                                </div>
                                                           
                                                                <div class="col-lg-6">
                                                                    <div class="mb-3">
                                                                        <label for="linkedin" class="form-label">Linkedin</label>
                                                                        <input type="text" class="form-control" id="linkedin"
                                                                            value="https://www.linkedin.com" />
                                                                    </div>
                                                                </div>
                                                          
                                                                <div class="col-lg-6">
                                                                    <div class="mb-3">
                                                                        <label for="whatsapp" class="form-label">Whatsapp</label>
                                                                        <input type="text" class="form-control" id="whatsapp"
                                                                            value="https://www.whatsapp.com" />
                                                                    </div>
                                                                </div>
                                                               
                                                            </div>
                                                            
                                                        </div> -->
                                                   
                                                        <div class="mt-4">
                                                            <h5 class="fs-17 fw-semibold mb-3 mb-3">
                                                                Alterar palavra-passe
                                                            </h5>
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="mb-3">
                                                                        <label for="current-password-input" class="form-label">palavra-passe Atual</label>
                                                                        <input type="password" class="form-control"
                                                                            placeholder="Digite a senha atual"
                                                                            id="current-password-input" />
                                                                    </div>
                                                                </div>
                                                                <!--end col-->
                                                                <div class="col-lg-6">
                                                                    <div class="mb-3">
                                                                        <label for="new-password-input" class="form-label">Nova palavra-passe</label>
                                                                        <input type="password" class="form-control"
                                                                            placeholder="Digite a nova senha"
                                                                            id="new-password-input" />
                                                                    </div>
                                                                </div>
                                                                <!--end col-->
                                                                <div class="col-lg-6">
                                                                    <div class="mb-3">
                                                                        <label for="confirm-password-input" class="form-label">Confirmar palavra-passe</label>
                                                                        <input type="password" class="form-control"
                                                                            placeholder="Confirme a nova senha"
                                                                            id="confirm-password-input" />
                                                                    </div>
                                                                </div>
                                                                <!--end col-->
                                                                <div class="col-lg-12">
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="checkbox" value=""
                                                                            id="verification" />
                                                                        <label class="form-check-label" for="verification">
                                                                            Ativar verificação em duas etapas por email
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <!--end col-->
                                                            </div>
                                                            <!--end row-->
                                                        </div>
                                                     
                                                        <div class="mt-4 text-end">
                                                            <a href="javascript:void(0)" class="btn btn-primary">Atualizar</a>
                                                        </div>
                                                    </form>
                                                    <!--end form--></div>
                                            
                                                <!--end tab-pane-->
                                            </div>
                                            <!--end tab-content-->
                                        </div>
                                        <!--end card-body-->
                                        </div>
                                    </div>
                                    <!--end profile-content-page-->
                                </div>
                                <!--end col-->
                                </div>
                            <!--end row-->
                        </div>
                        </div>
                        <!--end container-->
                    </section>
                    <!-- END PROFILE -->

                </div>
                <!-- End Page-content -->

                @@include("partials/footer.html")

                @@include("partials/switcher.html")
            </div>
            <!-- end main content-->

        </div>
        <!-- END layout-wrapper -->

        @@include("partials/vendor-scripts.html")

        <!-- Choice Js -->
        <script src="assets/libs/choices.js/public/assets/scripts/choices.min.js"></script>

        <!-- Job-list Init Js -->
        <script src="assets/js/pages/job-list.init.js"></script>

        <!-- Switcher Js -->
        <script src="assets/js/pages/switcher.init.js"></script>

        <!-- App Js -->
        <script src="assets/js/app.js"></script>
        <style scoped>
    
            .mailchimp-avatar img {
                /* width: 100%;
                height: 100%; */
                object-fit: cover;
            }
            </style>

    </body>
</html>